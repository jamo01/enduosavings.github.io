<!DOCTYPE html>
<html>

    <html lang="en">
        <head>
          <meta charset="UTF-8" />
          <meta name="viewport" content="width=device-width, initial-scale=1.0" />
          <meta http-equiv="X-UA-Compatible" content="ie=edge" />
          <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
          <link rel="stylesheet" href="./s.css">

          <title>Savings Calculator</title>
          <link rel="icon" type="image/x-icon" href="NewMotionLabs.jpg">
        </head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
<link rel="icon" type="image/x-icon" href="NewMotionLabs.jpg">
<!-- <script src="./ac.js"></script> -->

<!-- <style>

* {
  box-sizing: border-box;
}

header {
    background-color: #18192e;
  font-family: 'Poppins', sans-serif;
  color: #ffffff;
  
    font-weight: bolder;
    font-size: 40px;
    text-align: center;
}

body {
  background-color: #18192e;
  font-family: 'Poppins';

    font-weight: bolder;
    font-size: 25px;
    text-align: center;

}

#regForm {
    text-align: center;
  background-color: #ffffff;
  margin: 10px auto;
  font-family: 'Poppins', sans-serif;
  padding: 40px;
  width: 70%;
  min-width: 300px;
}

#formBox {
    text-align: center;
  background-color: #ffffff;
  margin: 100px auto;
  font-family: 'Poppins', sans-serif;
  padding: 40px;
  width: 70%;
  min-width: 300px;
}

h1 {
  text-align: center; 
  font-family: 'Poppins', sans-serif; 
}

input {
  text-align: center;
  padding: 10px;
  width: 40%;
  font-size: 17px;
  font-family: 'Poppins', sans-serif;
  border: 1px solid #aaaaaa;
}

/* Mark input boxes that gets an error on validation: */
input.invalid {
  background-color: #ffdddd;
}

/* Hide all steps by default: */
.tab {
  display: none;
}

button {
  background-color: #07efa4;
  color: #ffffff;
  border: none;
  padding: 10px 20px;
  font-size: 17px;
  font-family: 'Poppins', sans-serif;
  cursor: pointer;
}

button:hover {
  opacity: 0.8;
}

#prevBtn {
  background-color: #bbbbbb;
  font-family: 'Poppins', sans-serif;
}

/* Make circles that indicate the steps of the form: */
.step {
  height: 15px;
  width: 15px;
  margin: 0 2px;
  background-color: #bbbbbb;
  border: none;  
  border-radius: 50%;
  display: inline-block;
  opacity: 0.5;
}

.step.active {
  opacity: 1;
}

/* Mark the steps that are finished and valid: */
.step.finish {
  background-color: #07efa4;
}
</style>
-->
<header>
    <img src="EnduoCargo.png">
    <h1>Savings Calculator</h1>
    <hr size="4" width="100%" color="white">
    
</header> 

<body>
    <div id="formBox">

    <form id="regForm">
        <!-- One "tab" for each step in the form: -->
        <div class="tab"> <h1>Company Info:</h1> <br> How many bikes does your fleet own?
            <p><input placeholder="# Bikes" type="number" oninput="this.className = ''" name="nBikes"></p>
        </div>

        <div class="tab"> <h1>Company Info:</h1> <br> What percentage do you want to equip with Enduo?
            <p><input placeholder="% Bikes" type="number" oninput="this.className = ''" name="ptgBikes"></p>
        </div>

        <div class="tab"> <h1>Company Info:</h1> <br> How Many years has your fleet been in operation?
            <p><input placeholder="Years" type="number" oninput="this.className = ''" name="Years"></p>
        </div>

        <div class="tab"> <h1>Company Info:</h1> <br> How far does each bike travel per year?
            <p><input placeholder="# Bikes" type="number" oninput="this.className = ''" name="Dist"></p>
        </div>

        <div class="tab"> <h1>Company Info:</h1> <br> How much do you currently pay for chains?
            <p><input placeholder="£ Chain" type="number" oninput="this.className = ''" name="costChain"></p>
        </div>

        <div class="tab"> <h1>Company Info:</h1> <br> How much do you currently pay for your chainring and sprocket?
            <p><input placeholder="£ Chain" type="number" oninput="this.className = ''" name="costChainr"></p>
        </div>

        <div class="tab"> <h1>Company Info:</h1> <br> How much do you currently pay to replace chains? (mechanic cost)
            <p><input placeholder="£ Replacement" type="number" oninput="this.className = ''" name="costReplacement"></p>
        </div>

        <div class="tab"> <h1>Company Info:</h1> <br> How much do you currently pay for maintenance per chain per year?
            <p><input placeholder="£ Maitenance" type="number" oninput="this.className = ''" name="costMaitenance"></p>
        </div>

        <div style="overflow:auto;">
            <div style="float:right;">
            <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
            <button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
            </div>
        </div>
        <!-- Circles which indicates the steps of the form: -->
        <div style="text-align:center;margin-top:40px;">
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
        </div>
    </form>

    <!-- <div id="loading" class="loading" style="display: none;">
        <video width="320" height="240" autoplay>
            <source src="trimmm.mov" type="video/mp4">
          </video>
    </div> -->

    <div id="myResults" class="myResults" style="display: none;">
        <h1>Results</h1>
        <table>
            <tr>
              <th>Accumulated Costs per Bike</th>
              <th>Current</th> 
              <th>Enduo Cargo</th>
              <th>Enduo Light</th>
            </tr>
            <tr>
              <td>Chains</td> 
              <td id="cc"></td>
              <td id="ecc"></td>
              <td id="elc"></td>
            </tr>
            <tr>
              <td>Sprockets/chainrings</td>
              <td id="ccr"></td>
              <td id="eccr"></td>
              <td id="elcr"></td>
            </tr>
            <tr>
                <td>Service Costs</td>
                <td id="cs"></td>
                </td>
                <td id="ecs"></td>
                <td id="els"></td>
              </tr>
              <tr>
                <td>Maitenence Costs</td>
                <td id="cm"> </td>
                <td id="ecm"> </td>
                <td id="elm"> </td>
              </tr>
              <tr>
                <td>Total</td>
                <td id="ct"> </td>
                <td id="ect"> </td>
                <td id="elt"> </td>
              </tr>
          </table>

          <!-- <div id="container"></div> -->

          <h2 id="savings"> </h2>
          <p id="percent"> </p>

          <!-- <p id="myResultsParagraph"></p> -->
    </div>
 </div> 

    <script>
    var currentTab = 0; // Current tab is set to be the first tab (0)
    showTab(currentTab); // Display the current tab
    var formData = {};

    function showTab(n) {
    // This function will display the specified tab of the form...
    var x = document.getElementsByClassName("tab");
    x[n].style.display = "block";
    //... and fix the Previous/Next buttons:
    if (n == 0) {
        document.getElementById("prevBtn").style.display = "none";
    } else {
        document.getElementById("prevBtn").style.display = "inline";
    }
    if (n == (x.length - 1)) {
        document.getElementById("nextBtn").innerHTML = "Submit";
    } else {
        document.getElementById("nextBtn").innerHTML = "Next";
    }
    //... and run a function that will display the correct step indicator:
    fixStepIndicator(n)
    }

    function nextPrev(n) {
    // This function will figure out which tab to display
    var x = document.getElementsByClassName("tab");
    // Exit the function if any field in the current tab is invalid:
    if (n == 1 && !validateForm()) return false;
    //get name and value of input element
    var inputElements = x[currentTab].querySelectorAll("input");
    var inputElement = inputElements[0];
    formData[inputElement?.name] = inputElement?.value;
    // Hide the current tab:
    x[currentTab].style.display = "none";
    // Increase or decrease the current tab by 1:
    currentTab = currentTab + n;
    // if you have reached the end of the form...
    if (currentTab >= x.length) {
        console.log(formData)
        let nBikes = formData['nBikes'];
        let ptgBikes = formData['ptgBikes'];
        let Years = formData['Years'];
        let costChain = formData['costChain'];
        let costChainr = formData['costChainr'];
        let costCargoc = 45;
        let costCargo = 99;
        let costLightc = 49;
        let costLight = 59;
        let costReplacement = formData['costReplacement'];
        let costMaitenance = formData['costMaitenance'];
        let Dist = formData['Dist'];
        let chainlife = 3500;
        let sprocketlife = 3500;
        let cargoclife = 20000;
        let cargolife = 30000;
        let lightclife = 10000;
        let lightlife = 30000;

        let cc = Dist*Years*costChain/chainlife;
        let ccr = Dist*Years*costChainr/sprocketlife;
        let cs = Dist*Years*costReplacement/chainlife;
        let cm = costMaitenance*Years;
        let ct = cm + cs + ccr + cc;

        let ecc = Dist*Years*costCargoc/cargoclife;
        let eccr = Dist*Years*costCargo/cargolife;
        let ecs = Dist*Years*costReplacement/cargoclife;
        let ecm = costMaitenance*Years;
        let ect = ecc + eccr + ecs + ecm;

        let elc = Dist*Years*costLightc/lightclife;
        let elcr = Dist*Years*costLight/lightlife;
        let els = Dist*Years*costReplacement/lightclife;
        let elm = costMaitenance*Years;
        let elt = elc + elcr + els + elm;
       
       
        let fnum = nBikes * ptgBikes / 100;
        let ysavings = (ect/Years) - (ct/Years);
        let tsavings = fnum * ysavings * -1;


        // ... the form gets submitted:
        document.getElementById("regForm").style.display = "none";

        document.getElementById("myResults").style.display = "block";
        // setTimeout(document.getElementById("myResults").style.display = "block", 20000)
       
        document.getElementById("cc").innerText = "£" + cc.toFixed(2);
        document.getElementById("ccr").innerText = "£" + ccr.toFixed(2);
        document.getElementById("cs").innerText = "£" + cs.toFixed(2);
        document.getElementById("cm").innerText = "£" + cm.toFixed(2);
        document.getElementById("ct").innerText = "£" + ct.toFixed(2);

        document.getElementById("ecc").innerText = "£" + ecc.toFixed(2);
        document.getElementById("eccr").innerText = "£" + eccr.toFixed(2);
        document.getElementById("ecs").innerText = "£" + ecs.toFixed(2);
        document.getElementById("ecm").innerText = "£" + ecm.toFixed(2);
        document.getElementById("ect").innerText = "£" + ect.toFixed(2);

        document.getElementById("elc").innerText = "£" + elc.toFixed(2);
        document.getElementById("elcr").innerText = "£" + elcr.toFixed(2);
        document.getElementById("els").innerText = "£" + els.toFixed(2);
        document.getElementById("elm").innerText = "£" + elm.toFixed(2);
        document.getElementById("elt").innerText = "£" + elt.toFixed(2);

        // document.getElementById("savings").innerText = "Your fleet would save £";
        document.getElementById("savings").innerText = "Your fleet would save £" + tsavings.toFixed(2) + " per year";
        document.getElementById("percent").innerText = "(when used with " + ptgBikes + "% of your bikes)";
       
       let startcurrent = costChain + costChainr;
       let startcargo = costCargo + costCargoc;
       let startlife = costLight + costLightc;
       
        return false;
    }
    // Otherwise, display the correct tab:
    showTab(currentTab);
    }

    function validateForm() {
    // This function deals with validation of the form fields
    var x, y, i, valid = true;
    x = document.getElementsByClassName("tab");
    y = x[currentTab].getElementsByTagName("input");
    // A loop that checks every input field in the current tab:
    for (i = 0; i < y.length; i++) {
        // If a field is empty...
        if (y[i].value == "") {
        // add an "invalid" class to the field:
        y[i].className += " invalid";
        // and set the current valid status to false
        valid = false;
        }
    }
    // If the valid status is true, mark the step as finished and valid:
    if (valid) {
        document.getElementsByClassName("step")[currentTab].className += " finish";
    }
    return valid; // return the valid status
    }

    function fixStepIndicator(n) {
    // This function removes the "active" class of all steps...
    var i, x = document.getElementsByClassName("step");
    for (i = 0; i < x.length; i++) {
        x[i].className = x[i].className.replace(" active", "");
    }
    //... and adds the "active" class on the current step:
    x[n].className += " active";
    }
    </script>

</body>
</html>
